webpackJsonp([1],{518:function(e,t,n){function i(e){n(644)}var o=n(4)(n(597),n(685),i,"data-v-271fe1c4",null);e.exports=o.exports},536:function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=3)}([function(e,t,n){var i=n(4)(n(2),null,null,null);e.exports=i.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={menubar:!1,height:500,theme:"modern",toolbar_items_size:"small",plugins:["advlist autolink link image lists charmap print hr anchor pagebreak spellchecker","searchreplace visualblocks visualchars code fullscreen media nonbreaking","table directionality emoticons template textcolor paste textcolor colorpicker textpattern"],style_formats:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}],block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;",toolbar1:"insertfile undo redo | formatselect | bullist numlist | link unlink | uploadimg image media | fullscreen",toolbar2:"styleselect fontsizeselect | forecolor backcolor | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | outdent indent | removeformat"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{value:{type:String,default:""},setup:{type:Function,default:function(){}},setting:{type:Object,default:function(){return tinymceSetting}}},render:function(e){return e("div",{attrs:{id:this.id}})},data:function(){return{id:"vue-tinymce-"+Date.now(),editor:null,status:0,backup:""}},watch:{value:function(e){if(2===this.status)return this.status=1;this.editor&&this.editor.initialized&&this.editor.setContent(e)}},created:function(){if("undefined"==typeof tinymce)throw new Error("tinymce undefined")},mounted:function(){var e=this,t=Object.assign({},this.setting,{selector:"#"+this.id,setup:function(t){e.setup(t),e.editor=t,t.on("init",function(){t.setContent(e.value),t.on("input change undo redo execCommand KeyUp",function(){if(1===e.status||0===e.status)return e.status=2;e.$emit("input",t.getContent())}),t.on("NodeChange",function(){e.$emit("input",t.getContent())})})}});tinymce.init(t)},beforeDestroy:function(){this.editor.remove()}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);Object.defineProperty(t,"VueTinymce",{enumerable:!0,get:function(){return i(o).default}});var r=n(1);Object.defineProperty(t,"TinymceSetting",{enumerable:!0,get:function(){return i(r).default}});var a=n(0);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t){e.exports=function(e,t,n,i){var o,r=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(o=e,r=e.default);var s="function"==typeof r?r.options:r;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),n&&(s._scopeId=n),i){var c=Object.create(s.computed||null);Object.keys(i).forEach(function(e){var t=i[e];c[e]=function(){return t}}),s.computed=c}return{esModule:o,exports:r,options:s}}}])})},563:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(183),o=n.n(i),r=n(186),a=n.n(r),s=n(536);n.n(s);t.default={props:["content"],components:{VueTinymce:s.VueTinymce,TinymceSetting:s.TinymceSetting},data:function(){return{content1:"<p>可直接粘贴图片地址插入图片</p>",show_content1_html:!1,show_content2_html:!1,setting1:o.a.apply(Object,[{}].concat(a()(s.TinymceSetting),[{height:200,language_url:"./static/langs/zh_CN.js",block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;"}]))}},methods:{getTinymceId:function(e){alert(this.$refs[e].id)},insertImg:function(e,t){var n=t.path,i=t.key;e.undoManager.transact(function(){e.focus(),e.selection.setContent(e.dom.createHTML("img",{src:n,"data-key":i}))})},insertEmotion:function(e,t){this.insertImg(e,{key:t,path:this.emotions[t]})},formatHtml:function(e,t){var n=new tinymce.html.DomParser,i=new tinymce.html.Serializer,o=n.parse(e);return o.getAll("img").map(function(e){var t=e.attr("data-key")||"";if(t.length>0){var n=new tinymce.html.Node("span",1),i=new tinymce.html.Node("#text",3);i.value=t,n.append(i),e.replace(n)}}),i.serialize(o)},restoreHtml:function(e,t){var n=new tinymce.html.DomParser,i=new tinymce.html.Serializer,o=n.parse(e);return o.getAll("#text").map(function(e){var n=t[e.value];if(n){var i=new tinymce.html.Node("img",1);i.attr("data-key",e.value),i.attr("src",n),e.replace(i)}}),i.serialize(o)}},created:function(){this.content1=this.content}}},564:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["setting"],data:function(){return{imgName:"",visible:!1,uploadList:[]}},methods:{handleView:function(e){this.imgName=e,this.visible=!0},handleRemove:function(e){var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)},handleSuccess:function(e,t){t.name=e.filename,this.setting.fileList=this.$refs.upload.fileList},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:+e.name+" 的文件格式不正确，请选择"+this.setting.format})},handleMaxSize:function(e){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+e.name+" is too large, no more than 2M."})},handleBeforeUpload:function(){var e=this.uploadList.length<this.setting.maxFileNum;return e||this.$Notice.warning({title:"最多可上传"+this.setting.maxFileNum+"张照片"}),e}},mounted:function(){console.info("mounted"),this.uploadList=this.$refs.upload.fileList,console.info(this.uploadList)}}},597:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(676),o=n.n(i),r=n(675),a=n.n(r);t.default={name:"add-from",components:{ImageUpload:o.a,Tinymce:a.a},props:["ids"],data:function(){return{model1:"",category:[],formItem:{id:"",name:"",price:0,category_id:0,product_images:"",product_video:"",parameter:"<p>可直接粘贴图片地址插入图片</p>",details:"",characteristic:"",weights:0},settingF:{maxFileNum:1,maxSize:4096,accept:"image/gif, image/jpeg,image/*",format:["jpg","jpeg","png"],defaultList:[],fileList:""},settingS:{maxFileNum:1,maxSize:409600,accept:"video/mpeg, video/mp4,video/*",format:["mpeg","mp4","dat","rmvb"],defaultList:[],fileList:""},ruleInline:{name:[{required:!0,message:"请填写分类名称",trigger:"blur"}],keyword:[{required:!0,message:"请填写关键字名称的首字母",trigger:"blur"}]}}},methods:{handleSubmit:function(){var e=this;console.info("f到了"),this.loading=!0,this.formItem.characteristic=this.$refs.characteristic.content1,this.formItem.parameter=this.$refs.parameter.content1,this.formItem.details=this.$refs.details.content1,this.settingF.fileList.length>0&&(this.formItem.product_images=this.settingF.fileList[0].name),this.settingS.fileList.length>0&&(this.formItem.product_video=this.settingS.fileList[0].name),console.info(this.formItem),this.$refs.addFromSub.validate(function(t){if(!t)return e.$Message.success("验证失败"),!1;e.$store.dispatch("AddGoods",e.formItem).then(function(t){console.info("成功回调"),0==t.data.code?(console.info(t.data),e.$Message.error("提交失败"),e.todo.modal12=!0,e.$emit("refreshFrom"),e.loading=!1):(console.info(t.data),e.$Message.success("提交成功"),e.$router.push({name:"商品管理"}),e.loading=!1)}).catch(function(t){console.info(t),e.$Message.error(t),e.loading=!1})})},refresh:function(){var e=this;this.loading=!0,this.$store.dispatch("GetGoodsById",this.ids).then(function(t){console.info("成功回调"),t.data.length>0?(e.formItem=t.data[0],e.$refs.characteristic.content1=e.formItem.characteristic,e.$refs.parameter.content1=e.formItem.parameter,e.$refs.details.content1=e.formItem.details,e.$refs.settingF.uploadList.push({name:e.formItem.product_images,percentage:100,showProgress:!0,size:7072842,status:"finished",uid:1536828375626}),e.$refs.settingS.uploadList.push({name:e.formItem.product_video,percentage:100,showProgress:!0,size:7072842,status:"finished",uid:1536828375626})):e.$message.error("数据异常"),e.loading=!1}).catch(function(t){console.info(t),e.loading=!1})},cancel:function(){console.info("取消"),this.$router.push({name:"商品管理"})},firstLoad:function(){var e=this;this.$store.dispatch("GetCategoryGroup").then(function(t){console.info("成功回调1"),console.info(t.data),e.category=t.data,e.loading=!1}).catch(function(t){console.info(t),e.loading=!1})}},mounted:function(){console.group("------ mounted创建完毕状态------")},beforeMount:function(){console.group("------ beforeMount创建完毕状态------"),this.firstLoad()},created:function(){console.group("------created创建完毕状态------"),console.info(this.ids),void 0==this.ids?this.$router.push({name:"商品管理"}):0==this.ids||this.refresh()},beforeCreate:function(){console.group("------beforeCreate创建完毕状态------")},beforeDestroy:function(){console.group("------beforeDestroy创建完毕状态------")}}},611:function(e,t,n){t=e.exports=n(477)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"addFrom.vue",sourceRoot:""}])},619:function(e,t,n){t=e.exports=n(477)(!0),t.push([e.i,".demo-upload-list{display:inline-block;width:60px;height:60px;text-align:center;line-height:60px;border:1px solid transparent;border-radius:4px;overflow:hidden;background:#fff;position:relative;box-shadow:0 1px 1px rgba(0,0,0,.2);margin-right:4px}.demo-upload-list img{width:100%;height:100%}.demo-upload-list-cover{display:none;position:absolute;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.6)}.demo-upload-list:hover .demo-upload-list-cover{display:block}.demo-upload-list-cover i{color:#fff;font-size:20px;cursor:pointer;margin:0 2px}","",{version:3,sources:["D:/ziliao/vue-framework-wz/src/components/Upload/ImageUpload.vue"],names:[],mappings:"AACA,kBACI,qBAAsB,AACtB,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,iBAAkB,AAClB,6BAA8B,AAC9B,kBAAmB,AACnB,gBAAiB,AACjB,gBAAiB,AACjB,kBAAmB,AACnB,oCAAqC,AACrC,gBAAkB,CACrB,AACD,sBACI,WAAY,AACZ,WAAa,CAChB,AACD,wBACI,aAAc,AACd,kBAAmB,AACnB,MAAO,AACP,SAAU,AACV,OAAQ,AACR,QAAS,AACT,yBAA2B,CAC9B,AACD,gDACI,aAAe,CAClB,AACD,0BACI,WAAY,AACZ,eAAgB,AAChB,eAAgB,AAChB,YAAc,CACjB",file:"ImageUpload.vue",sourcesContent:["\n.demo-upload-list{\n    display: inline-block;\n    width: 60px;\n    height: 60px;\n    text-align: center;\n    line-height: 60px;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n    position: relative;\n    box-shadow: 0 1px 1px rgba(0,0,0,.2);\n    margin-right: 4px;\n}\n.demo-upload-list img{\n    width: 100%;\n    height: 100%;\n}\n.demo-upload-list-cover{\n    display: none;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: rgba(0,0,0,.6);\n}\n.demo-upload-list:hover .demo-upload-list-cover{\n    display: block;\n}\n.demo-upload-list-cover i{\n    color: #fff;\n    font-size: 20px;\n    cursor: pointer;\n    margin: 0 2px;\n}\n"],sourceRoot:""}])},624:function(e,t,n){t=e.exports=n(477)(!0),t.push([e.i,".editor-content[data-v-7c1f34b9]{margin-top:20px}.intro-head[data-v-7c1f34b9]{text-align:center;margin:10px}","",{version:3,sources:["D:/ziliao/vue-framework-wz/src/components/Tinymce.vue"],names:[],mappings:"AACA,iCACI,eAAiB,CACpB,AACD,6BACI,kBAAmB,AACnB,WAAa,CAChB",file:"Tinymce.vue",sourcesContent:["\n.editor-content[data-v-7c1f34b9]{\n    margin-top: 20px;\n}\n.intro-head[data-v-7c1f34b9]{\n    text-align: center;\n    margin: 10px;\n}\n"],sourceRoot:""}])},644:function(e,t,n){var i=n(611);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(478)("0f5d6d25",i,!0)},652:function(e,t,n){var i=n(619);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(478)("707c03c6",i,!0)},657:function(e,t,n){var i=n(624);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(478)("e601679c",i,!0)},675:function(e,t,n){function i(e){n(657)}var o=n(4)(n(563),n(702),i,"data-v-7c1f34b9",null);e.exports=o.exports},676:function(e,t,n){function i(e){n(652)}var o=n(4)(n(564),n(694),i,null,null);e.exports=o.exports},685:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Form",{ref:"addFromSub",attrs:{model:e.formItem,"label-width":80,rules:e.ruleInline}},[n("FormItem",{attrs:{label:"id",hidden:"true"}},[n("Input",{attrs:{placeholder:"id"},model:{value:e.formItem.id,callback:function(t){e.$set(e.formItem,"id",t)},expression:"formItem.id"}})],1),e._v(" "),n("FormItem",{attrs:{label:"名称",prop:"name"}},[n("Input",{attrs:{placeholder:"名称"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),e._v(" "),n("FormItem",{attrs:{label:"价格",prop:"price"}},[n("InputNumber",{attrs:{max:1e7,min:1},model:{value:e.formItem.price,callback:function(t){e.$set(e.formItem,"price",t)},expression:"formItem.price"}}),e._v(" 元\r\n            ")],1),e._v(" "),n("FormItem",{attrs:{label:"权重",prop:"weights"}},[n("InputNumber",{attrs:{max:1e7,min:1},model:{value:e.formItem.weights,callback:function(t){e.$set(e.formItem,"weights",t)},expression:"formItem.weights"}})],1),e._v(" "),n("FormItem",{attrs:{label:"关键字",prop:"keyword"}},[n("Input",{attrs:{placeholder:"搜索用（名称的首字母）"},model:{value:e.formItem.keyword,callback:function(t){e.$set(e.formItem,"keyword",t)},expression:"formItem.keyword"}})],1),e._v(" "),n("FormItem",{attrs:{label:"类别"}},[n("Select",{staticStyle:{width:"200px"},model:{value:e.formItem.category_id,callback:function(t){e.$set(e.formItem,"category_id",t)},expression:"formItem.category_id"}},e._l(e.category,function(t){return n("OptionGroup",{key:t.id,attrs:{label:t.name}},e._l(t.children,function(t){return n("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))}))],1),e._v(" "),n("FormItem",{attrs:{label:"产品图片"}},[n("image-upload",{ref:"settingF",attrs:{setting:e.settingF}})],1),e._v(" "),n("FormItem",{attrs:{label:"产品视频"}},[n("image-upload",{ref:"settingS",attrs:{setting:e.settingS}})],1),e._v(" "),n("FormItem",{attrs:{label:"产品参数"}},[n("tinymce",{ref:"parameter",attrs:{content:e.formItem.parameter}})],1),e._v(" "),n("FormItem",{attrs:{label:"产品详情"}},[n("tinymce",{ref:"details",attrs:{content:e.formItem.details}})],1),e._v(" "),n("FormItem",{attrs:{label:"产品特性"}},[n("tinymce",{ref:"characteristic",attrs:{content:e.formItem.characteristic}})],1),e._v(" "),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit()}}},[e._v("提交")]),e._v(" "),n("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.cancel()}}},[e._v("取消")])],1)],1)},staticRenderFns:[]}},694:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.uploadList,function(t){return n("div",{staticClass:"demo-upload-list"},["finished"===t.status?[n("img",{attrs:{src:e.GLOBAL.imageUrl+t.name}}),e._v(" "),n("div",{staticClass:"demo-upload-list-cover"},[n("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(n){e.handleView(e.GLOBAL.imageUrl+t.name)}}}),e._v(" "),n("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(n){e.handleRemove(t)}}})],1)]:[t.showProgress?n("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)}),e._v(" "),n("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{name:"logo","show-upload-list":!1,"default-file-list":e.setting.defaultList,accept:e.setting.accept,"on-success":e.handleSuccess,format:e.setting.format,"max-size":e.setting.maxSize,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,multiple:"",type:"drag",action:"api/uploadFile"}},[n("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[n("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),e._v(" "),n("Modal",{attrs:{title:"View Image"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?n("img",{staticStyle:{width:"100%"},attrs:{src:e.imgName}}):e._e()])],2)},staticRenderFns:[]}},702:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"components-container"},[n("Row",{attrs:{gutter:20}},[n("Col",{attrs:{span:12}},[n("vue-tinymce",{ref:"tinymce",attrs:{setting:e.setting1},model:{value:e.content1,callback:function(t){e.content1=t},expression:"content1"}})],1)],1),e._v(" "),n("Row",{attrs:{gutter:20}},[n("Col",{attrs:{span:12}},[n("h3",[e._v("实现效果：")]),e._v(" "),n("div",{domProps:{innerHTML:e._s(e.content1)}})])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=1.23e9a969185aa8e2853e.js.map