webpackJsonp([1],{519:function(e,t,i){function n(e){i(652)}var o=i(4)(i(603),i(694),n,"data-v-271fe1c4",null);e.exports=o.exports},538:function(e,t,i){!function(t,i){e.exports=i()}(0,function(){return function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=3)}([function(e,t,i){var n=i(4)(i(2),null,null,null);e.exports=n.exports},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={menubar:!1,height:500,theme:"modern",toolbar_items_size:"small",plugins:["advlist autolink link image lists charmap print hr anchor pagebreak spellchecker","searchreplace visualblocks visualchars code fullscreen media nonbreaking","table directionality emoticons template textcolor paste textcolor colorpicker textpattern"],style_formats:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}],block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;",toolbar1:"insertfile undo redo | formatselect | bullist numlist | link unlink | uploadimg image media | fullscreen",toolbar2:"styleselect fontsizeselect | forecolor backcolor | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | outdent indent | removeformat"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{value:{type:String,default:""},setup:{type:Function,default:function(){}},setting:{type:Object,default:function(){return tinymceSetting}}},render:function(e){return e("div",{attrs:{id:this.id}})},data:function(){return{id:"vue-tinymce-"+Date.now(),editor:null,status:0,backup:""}},watch:{value:function(e){if(2===this.status)return this.status=1;this.editor&&this.editor.initialized&&this.editor.setContent(e)}},created:function(){if("undefined"==typeof tinymce)throw new Error("tinymce undefined")},mounted:function(){var e=this,t=Object.assign({},this.setting,{selector:"#"+this.id,setup:function(t){e.setup(t),e.editor=t,t.on("init",function(){t.setContent(e.value),t.on("input change undo redo execCommand KeyUp",function(){if(1===e.status||0===e.status)return e.status=2;e.$emit("input",t.getContent())}),t.on("NodeChange",function(){e.$emit("input",t.getContent())})})}});tinymce.init(t)},beforeDestroy:function(){this.editor.remove()}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(0);Object.defineProperty(t,"VueTinymce",{enumerable:!0,get:function(){return n(o).default}});var r=i(1);Object.defineProperty(t,"TinymceSetting",{enumerable:!0,get:function(){return n(r).default}});var a=i(0);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t){e.exports=function(e,t,i,n){var o,r=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(o=e,r=e.default);var s="function"==typeof r?r.options:r;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),i&&(s._scopeId=i),n){var c=Object.create(s.computed||null);Object.keys(n).forEach(function(e){var t=n[e];c[e]=function(){return t}}),s.computed=c}return{esModule:o,exports:r,options:s}}}])})},569:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(183),o=i.n(n),r=i(538);i.n(r);t.default={props:["content"],components:{VueTinymce:r.VueTinymce,TinymceSetting:r.TinymceSetting},data:function(){return{content1:"<p>可直接粘贴图片地址插入图片</p>",show_content1_html:!1,show_content2_html:!1,setting1:o()({},r.TinymceSetting,{height:200,language_url:"./static/langs/zh_CN.js",block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;"})}},methods:{getTinymceId:function(e){alert(this.$refs[e].id)},insertImg:function(e,t){var i=t.path,n=t.key;e.undoManager.transact(function(){e.focus(),e.selection.setContent(e.dom.createHTML("img",{src:i,"data-key":n}))})},insertEmotion:function(e,t){this.insertImg(e,{key:t,path:this.emotions[t]})},formatHtml:function(e,t){var i=new tinymce.html.DomParser,n=new tinymce.html.Serializer,o=i.parse(e);return o.getAll("img").map(function(e){var t=e.attr("data-key")||"";if(t.length>0){var i=new tinymce.html.Node("span",1),n=new tinymce.html.Node("#text",3);n.value=t,i.append(n),e.replace(i)}}),n.serialize(o)},restoreHtml:function(e,t){var i=new tinymce.html.DomParser,n=new tinymce.html.Serializer,o=i.parse(e);return o.getAll("#text").map(function(e){var i=t[e.value];if(i){var n=new tinymce.html.Node("img",1);n.attr("data-key",e.value),n.attr("src",i),e.replace(n)}}),n.serialize(o)}},created:function(){this.content1=this.content}}},570:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["setting"],data:function(){return{imgName:"",visible:!1,uploadList:[]}},methods:{handleView:function(e){this.imgName=e,this.visible=!0},handleRemove:function(e){var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)},handleSuccess:function(e,t){t.name=e.filename,this.setting.fileList=this.$refs.upload.fileList},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:+e.name+" 的文件格式不正确，请选择"+this.setting.format})},handleMaxSize:function(e){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+e.name+" is too large, no more than 2M."})},handleBeforeUpload:function(){var e=this.uploadList.length<this.setting.maxFileNum;return e||this.$Notice.warning({title:"最多可上传"+this.setting.maxFileNum+"张照片"}),e}},mounted:function(){console.info("mounted"),this.uploadList=this.$refs.upload.fileList,console.info(this.uploadList)}}},603:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(685),o=i.n(n),r=i(684),a=i.n(r);t.default={name:"add-from",components:{ImageUpload:o.a,Tinymce:a.a},props:["ids"],data:function(){return{model1:"",category:[],formItem:{id:"",name:"",price:0,category_id:0,product_images:"",qrcode:"",product_video:"",parameter:"<p>可直接粘贴图片地址插入图片</p>",details:"",characteristic:"",weights:0},settingF:{maxFileNum:1,maxSize:4096,accept:"image/gif, image/jpeg,image/*",format:["jpg","jpeg","png"],defaultList:[],fileList:""},settingS:{maxFileNum:1,maxSize:409600,accept:"video/mpeg, video/mp4,video/*",format:["mpeg","mp4","dat","rmvb"],defaultList:[],fileList:""},settingQrcode:{maxFileNum:1,maxSize:4096,accept:"image/gif, image/jpeg,image/*",format:["jpg","jpeg","png"],defaultList:[],fileList:""},ruleInline:{name:[{required:!0,message:"请填写分类名称",trigger:"blur"}],keyword:[{required:!0,message:"请填写关键字名称的首字母",trigger:"blur"}]}}},methods:{handleSubmit:function(){var e=this;console.info("f到了"),this.loading=!0,this.formItem.characteristic=this.$refs.characteristic.content1,this.formItem.parameter=this.$refs.parameter.content1,this.formItem.details=this.$refs.details.content1,this.settingF.fileList.length>0&&(this.formItem.product_images=this.settingF.fileList[0].name),this.settingQrcode.fileList.length>0&&(this.formItem.qrcode=this.settingQrcode.fileList[0].name),this.settingS.fileList.length>0&&(this.formItem.product_video=this.settingS.fileList[0].name),console.info(this.formItem),this.$refs.addFromSub.validate(function(t){if(!t)return e.$Message.success("验证失败"),!1;e.$store.dispatch("AddGoods",e.formItem).then(function(t){console.info("成功回调"),0==t.data.code?(console.info(t.data),e.$Message.error("提交失败"),e.todo.modal12=!0,e.$emit("refreshFrom"),e.loading=!1):(console.info(t.data),e.$Message.success("提交成功"),e.$router.push({name:"商品管理"}),e.loading=!1)}).catch(function(t){console.info(t),e.$Message.error(t),e.loading=!1})})},refresh:function(){var e=this;this.loading=!0,this.$store.dispatch("GetGoodsById",this.ids).then(function(t){console.info("成功回调"),t.data.length>0?(e.formItem=t.data[0],e.$refs.characteristic.content1=e.formItem.characteristic,e.$refs.parameter.content1=e.formItem.parameter,e.$refs.details.content1=e.formItem.details,e.$refs.settingF.uploadList.push({name:e.formItem.product_images,percentage:100,showProgress:!0,size:7072842,status:"finished",uid:1536828375626}),e.$refs.settingS.uploadList.push({name:e.formItem.product_video,percentage:100,showProgress:!0,size:7072842,status:"finished",uid:1536828375626})):e.$message.error("数据异常"),e.loading=!1}).catch(function(t){console.info(t),e.loading=!1})},cancel:function(){console.info("取消"),this.$router.push({name:"商品管理"})},firstLoad:function(){var e=this;this.$store.dispatch("GetCategoryGroup").then(function(t){console.info("成功回调1"),console.info(t.data),e.category=t.data,e.loading=!1}).catch(function(t){console.info(t),e.loading=!1})}},mounted:function(){console.group("------ mounted创建完毕状态------")},beforeMount:function(){console.group("------ beforeMount创建完毕状态------"),this.firstLoad()},created:function(){console.group("------created创建完毕状态------"),this.formItem.id=this.$route.params.ids.id,this.formItem.keyword=this.$route.params.ids.keyword,this.formItem.name=this.$route.params.ids.name,this.formItem.price=this.$route.params.ids.price,this.formItem.category_id=this.$route.params.ids.category_id,this.formItem.parameter=this.$route.params.ids.parameter,this.formItem.details=this.$route.params.ids.details,this.formItem.qrcode=this.$route.params.ids.qrcode,this.formItem.product_images=this.$route.params.ids.product_images,this.formItem.characteristic=this.$route.params.ids.characteristic,this.formItem.weights=this.$route.params.ids.weights,this.settingF.defaultList=[{name:this.$route.params.ids.product_images}],this.settingS.defaultList=[{name:this.$route.params.ids.product_video}],this.settingQrcode.defaultList=[{name:this.$route.params.ids.qrcode}],console.info(this.ids),void 0==this.ids?this.$router.push({name:"商品管理"}):0==this.ids||this.refresh()},beforeCreate:function(){console.group("------beforeCreate创建完毕状态------")},beforeDestroy:function(){console.group("------beforeDestroy创建完毕状态------")}}},618:function(e,t,i){t=e.exports=i(477)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"addFrom.vue",sourceRoot:""}])},627:function(e,t,i){t=e.exports=i(477)(!0),t.push([e.i,".demo-upload-list{display:inline-block;width:60px;height:60px;text-align:center;line-height:60px;border:1px solid transparent;border-radius:4px;overflow:hidden;background:#fff;position:relative;box-shadow:0 1px 1px rgba(0,0,0,.2);margin-right:4px}.demo-upload-list img{width:100%;height:100%}.demo-upload-list-cover{display:none;position:absolute;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.6)}.demo-upload-list:hover .demo-upload-list-cover{display:block}.demo-upload-list-cover i{color:#fff;font-size:20px;cursor:pointer;margin:0 2px}","",{version:3,sources:["D:/ziliao/vue-framework-wz/src/components/Upload/ImageUpload.vue"],names:[],mappings:"AACA,kBACI,qBAAsB,AACtB,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,iBAAkB,AAClB,6BAA8B,AAC9B,kBAAmB,AACnB,gBAAiB,AACjB,gBAAiB,AACjB,kBAAmB,AACnB,oCAAqC,AACrC,gBAAkB,CACrB,AACD,sBACI,WAAY,AACZ,WAAa,CAChB,AACD,wBACI,aAAc,AACd,kBAAmB,AACnB,MAAO,AACP,SAAU,AACV,OAAQ,AACR,QAAS,AACT,yBAA2B,CAC9B,AACD,gDACI,aAAe,CAClB,AACD,0BACI,WAAY,AACZ,eAAgB,AAChB,eAAgB,AAChB,YAAc,CACjB",file:"ImageUpload.vue",sourcesContent:["\n.demo-upload-list{\n    display: inline-block;\n    width: 60px;\n    height: 60px;\n    text-align: center;\n    line-height: 60px;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n    position: relative;\n    box-shadow: 0 1px 1px rgba(0,0,0,.2);\n    margin-right: 4px;\n}\n.demo-upload-list img{\n    width: 100%;\n    height: 100%;\n}\n.demo-upload-list-cover{\n    display: none;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: rgba(0,0,0,.6);\n}\n.demo-upload-list:hover .demo-upload-list-cover{\n    display: block;\n}\n.demo-upload-list-cover i{\n    color: #fff;\n    font-size: 20px;\n    cursor: pointer;\n    margin: 0 2px;\n}\n"],sourceRoot:""}])},632:function(e,t,i){t=e.exports=i(477)(!0),t.push([e.i,".editor-content[data-v-7c1f34b9]{margin-top:20px}.intro-head[data-v-7c1f34b9]{text-align:center;margin:10px}","",{version:3,sources:["D:/ziliao/vue-framework-wz/src/components/Tinymce.vue"],names:[],mappings:"AACA,iCACI,eAAiB,CACpB,AACD,6BACI,kBAAmB,AACnB,WAAa,CAChB",file:"Tinymce.vue",sourcesContent:["\n.editor-content[data-v-7c1f34b9]{\n    margin-top: 20px;\n}\n.intro-head[data-v-7c1f34b9]{\n    text-align: center;\n    margin: 10px;\n}\n"],sourceRoot:""}])},652:function(e,t,i){var n=i(618);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(478)("0f5d6d25",n,!0)},661:function(e,t,i){var n=i(627);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(478)("707c03c6",n,!0)},666:function(e,t,i){var n=i(632);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(478)("e601679c",n,!0)},684:function(e,t,i){function n(e){i(666)}var o=i(4)(i(569),i(712),n,"data-v-7c1f34b9",null);e.exports=o.exports},685:function(e,t,i){function n(e){i(661)}var o=i(4)(i(570),i(704),n,null,null);e.exports=o.exports},694:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Form",{ref:"addFromSub",attrs:{model:e.formItem,"label-width":80,rules:e.ruleInline}},[i("FormItem",{attrs:{label:"id",hidden:"true"}},[i("Input",{attrs:{placeholder:"id"},model:{value:e.formItem.id,callback:function(t){e.$set(e.formItem,"id",t)},expression:"formItem.id"}})],1),e._v(" "),i("FormItem",{attrs:{label:"名称",prop:"name"}},[i("Input",{attrs:{placeholder:"名称"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),e._v(" "),i("FormItem",{attrs:{label:"价格",prop:"price"}},[i("InputNumber",{attrs:{max:1e7,min:1},model:{value:e.formItem.price,callback:function(t){e.$set(e.formItem,"price",t)},expression:"formItem.price"}}),e._v(" 元\n    ")],1),e._v(" "),i("FormItem",{attrs:{label:"权重",prop:"weights"}},[i("InputNumber",{attrs:{max:1e7,min:1},model:{value:e.formItem.weights,callback:function(t){e.$set(e.formItem,"weights",t)},expression:"formItem.weights"}})],1),e._v(" "),i("FormItem",{attrs:{label:"关键字",prop:"keyword"}},[i("Input",{attrs:{placeholder:"搜索用（名称的首字母）"},model:{value:e.formItem.keyword,callback:function(t){e.$set(e.formItem,"keyword",t)},expression:"formItem.keyword"}})],1),e._v(" "),i("FormItem",{attrs:{label:"类别"}},[i("Select",{staticStyle:{width:"200px"},model:{value:e.formItem.category_id,callback:function(t){e.$set(e.formItem,"category_id",t)},expression:"formItem.category_id"}},e._l(e.category,function(t){return i("OptionGroup",{key:t.id,attrs:{label:t.name}},e._l(t.children,function(t){return i("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))}))],1),e._v(" "),i("FormItem",{attrs:{label:"产品图片"}},[i("image-upload",{ref:"settingF",attrs:{setting:e.settingF}})],1),e._v(" "),i("FormItem",{attrs:{label:"二维码图片"}},[i("image-upload",{ref:"settingQrcode",attrs:{setting:e.settingQrcode}})],1),e._v(" "),i("FormItem",{attrs:{label:"产品视频"}},[i("image-upload",{ref:"settingS",attrs:{setting:e.settingS}})],1),e._v(" "),i("FormItem",{attrs:{label:"产品参数"}},[i("tinymce",{ref:"parameter",attrs:{content:e.formItem.parameter}})],1),e._v(" "),i("FormItem",{attrs:{label:"产品详情"}},[i("tinymce",{ref:"details",attrs:{content:e.formItem.details}})],1),e._v(" "),i("FormItem",{attrs:{label:"产品特性"}},[i("tinymce",{ref:"characteristic",attrs:{content:e.formItem.characteristic}})],1),e._v(" "),i("FormItem",[i("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit()}}},[e._v("提交")]),e._v(" "),i("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.cancel()}}},[e._v("取消")])],1)],1)},staticRenderFns:[]}},704:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._l(e.uploadList,function(t){return i("div",{staticClass:"demo-upload-list"},["finished"===t.status?[i("img",{attrs:{src:e.GLOBAL.imageUrl+t.name}}),e._v(" "),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(i){e.handleView(e.GLOBAL.imageUrl+t.name)}}}),e._v(" "),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){e.handleRemove(t)}}})],1)]:[t.showProgress?i("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)}),e._v(" "),i("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{name:"logo","show-upload-list":!1,"default-file-list":e.setting.defaultList,accept:e.setting.accept,"on-success":e.handleSuccess,format:e.setting.format,"max-size":e.setting.maxSize,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,multiple:"",type:"drag",action:"api/uploadFile"}},[i("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[i("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),e._v(" "),i("Modal",{attrs:{title:"View Image"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?i("img",{staticStyle:{width:"100%"},attrs:{src:e.imgName}}):e._e()])],2)},staticRenderFns:[]}},712:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"components-container"},[i("Row",{attrs:{gutter:20}},[i("Col",{attrs:{span:12}},[i("vue-tinymce",{ref:"tinymce",attrs:{setting:e.setting1},model:{value:e.content1,callback:function(t){e.content1=t},expression:"content1"}})],1)],1),e._v(" "),i("Row",{attrs:{gutter:20}},[i("Col",{attrs:{span:12}},[i("h3",[e._v("实现效果：")]),e._v(" "),i("div",{domProps:{innerHTML:e._s(e.content1)}})])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=1.a435dc28bd42bc2096ec.js.map